# Telegram-бот для поиска подходящих отелей на сайте Hotels.com

Простой Telegram-бот, который по определённым критериям и запросам
может анализировать текущие предложения по отелям и выдавать необходимый
для турагентства (и туристов) результат.

## Возможности Telegram-бота

Для запуска бота необходимо набрать команду /start.
Если Вы хотите увидеть список возможных команд бота, необходимо набрать 
команду /help.

### Команды бота:   
/lowprice — вывод самых дешёвых отелей в городе.   
/highprice — вывод самых дорогих отелей в городе.   
/bestdeal — вывод отелей, наиболее подходящих по цене и расположению от центра.   
/history - история поиска пользователя

### Описание команд
#### Команда /lowprice   
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Количество отелей, которые необходимо вывести в результате (не больше 25).
3. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
a. При положительном ответе пользователь также вводит количество
необходимых фотографий (не больше 10)
#### Команда /highprice
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Количество отелей, которые необходимо вывести в результате (не больше 25).
3. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
a. При положительном ответе пользователь также вводит количество
необходимых фотографий (не больше 10)
#### Команда /bestdeal
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
2. Диапазон цен.
3. Диапазон расстояния, на котором находится отель от центра.
4. Количество отелей, которые необходимо вывести в результате (не больше 25).
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
a. При положительном ответе пользователь также вводит количество
необходимых фотографий (не больше 10)
#### Команда /history
После ввода команды пользователю выводится история поиска отелей. Сама история
содержит:
1. Дату и время ввода команды.
2. Команду, которую вводил пользователь.
3. Город, в котором производился поиск.
4. Статус поиска (завершен/не завершен).
Пользователь может выбрать из истории необходимый запрос для повторного поиска 
или продолжения, если запрос был не завершен.
## Описание структуры проекта:
Проект содержит следующие модули:
1. main.py - основной модуль, в котором происходит обмен сообщениями с Telegram-ботом
и обработка нажатия кнопок в пользовательских меню.
2. .env_example - пример модуля, который содержит ключи Telegram-бота и сайта rapidapi.com.
3. history.py -  модуль, отвечающий за работу с историей запросов пользователя и
для работы с базой данных
4. history.db - база данных SQLite для хранения запросов пользователей.
5. handlers.py - модуль, отвечающий за логику бота. Проверяет статус текущего запроса и 
запускает необходимую функцию для обработки.
6. rapidapi.py - модуль с описанием класса Api_request. Класс содержит в себе данные о
текущем запросе пользователя
7. user.py - модуль с описанием класса User. Класс содержит в себе текущую команду пользователяЮ
запрос, выполняемый этой командой, а также историю запросов пользователя.
8. telegramcalendar.py - модуль, создающий меню с календарем для ввода даты. За основу
взят календарь из https://github.com/unmonoqueteclea/calendar-telegram, который 
отредактирован под нужды текущего проекта.
9. loader.py - модуль для загрузки переменных окружения для работы с Telegram-ботом, 
rapidapi.com и базой данных.
10. requirements.txt - файл с требованиями к модулям Python, необходимым для запуска бота.
11. debug.log - файл, содержащий в себе логи с необходимыми "контрольными точками" бота, а также
с вожможными ошибками, возникающими при запуске бота.
## Установка Telegram-бота.
1. Переписать все необходимые модули из проекта в директорию с Вашим проектом.
2. Просмотреть файл requirements.txt и, при необходимости, установить недостающие модули.
3. Переписать ключ от Вашего Telegram-бота в файл .env_example.
4. Переписать ключ от Вашего профиля на rapidapi.com в файл .env_example.
5. Переименовать файл .env_example в .env.
6. Запустить main.py
